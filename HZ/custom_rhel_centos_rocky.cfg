
# CentOS kickstart for Dedibox

# author: Fran√ßois Cami <fcami@fedoraproject.org>
# License: MIT

# see README.md

#auth --enableshadow --passalgo=sha512
#url --url="https://mirror.nl.leaseweb.net/centos-vault/7.8.2003/os/x86_64/"
#url --url="https://mirror.nl.leaseweb.net/centos-vault/8.3.2011/BaseOS/x86_64/os/"

#url --url="https://mirror.leaseweb.com/rockylinux/9.3/BaseOS/x86_64/os/"
url --url="___URL___"

#Graphical install
#text

firstboot --disable
#ignoredisk --only-use=sda

keyboard --vckeymap=us --xlayouts='us'
lang en_US.UTF-8

########### UPDATE ##################
#####    gateway , ip , host    #####
#####################################
network  --bootproto=static --device=___DEVICE___ --gateway=___GATEWAY___ --ip=___IP___ --nameserver=___DNS1___,___DNS2___ --netmask=255.255.255.0 --hostname=HOST.EXAMPLE.COM --noipv6 --activate
#network  --bootproto=static --device=eth0 --gateway=217.61.58.1 --ip=217.61.58.32 --nameserver=8.8.4.4,8.8.8.8 --netmask=255.255.255.0 --hostname=HOST.EXAMPLE.COM --noipv6 --activate
#network  --bootproto=static --device=eth0 --gateway=88.99.211.1 --ip=88.99.211.15 --nameserver=8.8.4.4,8.8.8.8 --netmask=255.255.255.0 --hostname=HOST.EXAMPLE.COM --noipv6 --activate
#network  --bootproto=static --device=eth0 --gateway=88.99.211.1 --ip=88.99.211.15 --nameserver=8.8.4.4,8.8.8.8 --netmask=255.255.255.0 --hostname=HOST.EXAMPLE.COM --noipv6 --activate
#network  --bootproto=dhcp --device=eth1 --onboot=off --noipv6
#network  --hostname=HOST.EXAMPLE.COM

reboot

firewall --disabled
selinux --disabled

#rootpw --plaintext changeme

# System services
#services --enabled="chronyd"

# System timezone
timezone --utc Etc/UTC


### DISK


#bootloader --location=mbr --driveorder=sda
#zerombr
#clearpart --all --initlabel --drives=sda

#part /boot --fstype="ext4" --size=1024 --ondisk=sda 
#part swap  --fstype="swap" --size=1024 --ondisk=sda 
#part /     --fstype="ext4" --size=1024 --grow --ondisk=sda 


### DISK 

#bootloader --location=mbr --driveorder=sda
#zerombr
#clearpart --all --initlabel --drives=sda
### THIS WORKS ### clearpart --all 

#part /boot --fstype=ext4 --size=512 --ondisk=sda 

#part swap  --fstype="swap" --size=1024 --ondisk=sda 

#part / --fstype=ext4  --size=2048 --grow --ondisk=sda
#########################

########## NEW RAID0 ##########
#part raid.01 --size=1024 --grow --ondisk=sda
#part raid.02 --size=1024 --grow --ondisk=sdb
#part raid.03 --size=1024 --grow --ondisk=sdc
#part raid.04 --size=1024 --grow --ondisk=sdd
#########################

## comment "boot" and "swap" below if  "part /boot" and "part swap" is active above
# or
#raid /boot --fstype ext4 --level=RAID0 --device=md1 boot.1 boot.2
#raid swap --fstype swap --level=RAID0 --device=md2 swap.1 swap.2 

# and 

#raid / --fstype=ext4 --level=RAID0 --device=md0 disk.1 disk.2 disk.3 disk.4
#raid / --fstype=ext4 --level=RAID0 --device=md0 raid.01 raid.02 raid.03 raid.04



%pre --log /tmp/pre-install.log
echo "Starting Kickstart Pre-Installation..."
%end

%post --log /root/post-install.log
cat >> /root/pre-install.log << "EOF"
%include /tmp/pre-install.log
EOF
%end

#######

%packages
@^minimal-environment
@core
wget
curl
tar
vim
lsof
nano
yum-utils
#kexec-tools
#tmux
#chrony
%end
